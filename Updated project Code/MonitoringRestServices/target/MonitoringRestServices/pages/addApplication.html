<script>
	$(function() {
		$('#addappform')
				.validate(
						{
							rules : {
								appName : "required",
							},
							messages : {
								appName : "Please Enter Application name",
							},
							submitHandler : function(form) {

								var appdata = {};
								appdata.name = $("#appName").val();
								appdata.smsFlag = $("#appSmsAlertConfigName")
										.prop('checked');
								appdata.emailFlag = $(
										"#appEmailAlertConfigName").prop(
										'checked');
								$
										.ajax({
											type : "POST",
											contentType : "application/json; charset=utf-8",
											url : '/MonitoringRestServices/rest/application',
											data : JSON.stringify(appdata),
											dataType : "json",
											headers : getHeadersData(),
											success : function(msg) {
												if (msg.code == 200) {
													var result = '<p class="successMessage">'
															+ msg.message
															+ '</p>';
													$("#rightpanel")
															.load(
																	"pages/applicationList.html",
																	function() {
																		$(
																				"#applicationResult")
																				.html(
																						result);
																		$(
																				"#applicationResult")
																				.addClass(
																						"alert alert-success");
																	});

												} else {
													var result = '<p class="failureMessage">'
															+ msg.message
															+ '</p>';
													$("#rightpanel")
															.load(
																	"pages/applicationList.html",
																	function() {
																		$(
																				"#applicationResult")
																				.html(
																						result);
																		$(
																				"#applicationResult")
																				.addClass(
																						"alert alert-danger");
																	});
												}
											},
											failure : function(errMsg) {
												var result = '<p class="failureMessage">'
														+ msg.message + '</p>';
												$("#rightpanel")
														.load(
																"pages/applicationList.html",
																function() {
																	$(
																			"#applicationResult")
																			.html(
																					result);
																	$(
																			"#applicationResult")
																			.addClass(
																					"alert alert-danger");
																});
											}

										});

							}
						});
	});

	$("#CancelAppBtn").bind('click', function() {
		$("#rightpanel").load("pages/applicationList.html");
	});
</script>
<h2>Add New Application</h2>
<div id="addApp">
	<form id="addappform" action="" novalidate="novalidate"
		class="form-inline" method="post">
		<table class="t1 table">
			<tbody>
				<tr>
					<td><label for="appName">Application Name</label><br> <input
						type="text" class="form-control" id="appName" name="appName" /></td>
				</tr>
				<tr>
					<td><label>SMS</label><input type="checkbox"
						name="appSmsAlertConfigName" id="appSmsAlertConfigName" /></td>
				</tr>
				<tr>
					<td><label>E-mail</label><input type="checkbox"
						name="appEmailAlertConfigName" id="appEmailAlertConfigName" /></td>
				</tr>
				<tr>
					<td><input type="submit" class="btn btn-primary" name="submit"
						value="Save Application" /> <input type="button"
						class="btn btn-info" id="CancelAppBtn" value="Cancel" /></td>
				</tr>
			</tbody>
		</table>
	</form>
	<div id="submitAppResult"></div>
</div>
