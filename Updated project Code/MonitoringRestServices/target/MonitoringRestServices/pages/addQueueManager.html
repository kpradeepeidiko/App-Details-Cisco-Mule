<script>
	$(function() {
		$.validator.addMethod("qmHostRegex", function(value, element, regexp) {
			var re = new RegExp(regexp);
			var re2 = new RegExp(validHostnameRegex);
			return this.optional(element) || re.test(value); //|| re2.test(value)   
		});

		$.validator.addMethod("qmRegex", function(value, element, regexp) {
			var re = new RegExp(regexp);
			return this.optional(element) || re.test(value);
		});

		$.validator.addMethod("qmUserRegex", function(value, element, regexp) {
			var re = new RegExp(regexp);
			return this.optional(element) || re.test(value);
		});

		$('#addqmform')
				.validate(
						{

							rules : {
								qmName : {
									required : true,
									qmRegex : /^[A-Za-z0-9_-]+$/
								},
								qmHost : {
									required : true
								//qmHostRegex: /^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3})$|^((([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9]))$/
								},
								sqmHost : {
									required : true
								},
								qmSrvConn : "required",
								qmPort : {
									required : true,
									number : true
								},
								qmUser : {
									required : true,
									qmUserRegex : /^[A-Za-z0-9_-]+$/
								},
							},
							messages : {

								qmName : {
									required : "Please Enter Queue Manager Name",
									qmRegex : "Please Enter Valid Queue Manager Name"
								},
								qmHost : {
									required : "Please Enter  Host Name",
								// qmHostRegex: "Please Enter Valid  Host Name"  
								},
								sqmHost : {
									required : "Please Secondary Enter  Host Name",
								// qmHostRegex: "Please Enter Valid  Host Name"  
								},
								qmSrvConn : "Please Enter  Server Connection",
								qmPort : {
									required : "Please Enter Port Number",
									number : "Please Enter Numbers only"
								},
								qmUser : {
									required : "Please Enter User Name",
									qmUserRegex : "Please Enter Valid User Name"
								},
							},

							submitHandler : function(form) {
								var data = {};
								data.name = $("#qmName").val();
								data.host = $("#qmHost").val();
								data.shost = $("#sqmHost").val();
								data.svrConn = $("#qmSrvConn").val();
								data.listnerPort = $("#qmPort").val();
								data.mcaUser = $("#qmUser").val();
								console.log(JSON.stringify(data));
								$
										.ajax({

											type : "POST",
											contentType : "application/json; charset=utf-8",
											url : '/MonitoringRestServices/rest/queuemanager',
											data : JSON.stringify(data),
											dataType : "json",
											headers : getHeadersData(),
											success : function(msg) {
												if (msg.code == 200) {
													var result = '<p class="successMessage">'
															+ msg.message
															+ '</p>';
													$("#rightpanel")
															.load(
																	"pages/queueManagerList.html",
																	function() {
																		$(
																				"#qmListResults")
																				.html(
																						result);
																		$(
																				"#qmListResults")
																				.removeClass(
																						"alert alert-danger");
																		$(
																				"#qmListResults")
																				.addClass(
																						"alert alert-success");
																	});

												} else {
													var result = '<p class="failureMessage">'
															+ msg.message
															+ '</p>';
													$("#rightpanel")
															.load(
																	"pages/queueManagerList.html",
																	function() {
																		$(
																				"#qmListResults")
																				.html(
																						result);
																		$(
																				"#qmListResults")
																				.removeClass(
																						"alert alert-success");
																		$(
																				"#qmListResults")
																				.addClass(
																						"alert alert-danger");
																	});
												}
											},
											failure : function(errMsg) {
												var result = '<p class="failureMessage">'
														+ msg.message + '</p>';
												$("#rightpanel")
														.load(
																"pages/queueManagerList.html",
																function() {
																	$(
																			"#qmListResults")
																			.html(
																					result);
																	$(
																			"#qmListResults")
																			.removeClass(
																					"alert alert-success");
																	$(
																			"#qmListResults")
																			.addClass(
																					"alert alert-danger");
																});
											}

										});

							}
						});
	});

	$("#CancelManagerBtn").bind('click', function() {
		$("#rightpanel").load("pages/queueManagerList.html");
	});
</script>

<h2>Add New Queue Managers</h2>
<div id="addQM">
	<form id="addqmform" action="" class="form-inline" method="post">
		<table class="t1 table">
			<tbody>
				<tr>
					<td><label>Queue Manager Name</label><br> <input
						type="text" class="form-control" name="qmName" id="qmName" /></td>

					<td><label>Host Name</label><br> <input type="text"
						name="qmHost" class="form-control" id="qmHost" /></td>

					<td><label>Secondary Host Name</label><br> <input
						type="text" name="sqmHost" class="form-control" id="sqmHost" /></td>
				</tr>
				<tr>
					<td><label>Server Connection Channel</label><br> <input
						type="text" class="form-control" name="qmSrvConn" id="qmSrvConn" /></td>

					<td><label>Listener Port</label><br> <input type="text"
						name="qmPort" class="form-control" id="qmPort" /></td>

					<td><label>MCA User</label><br> <input type="text"
						name="qmUser" class="form-control" id="qmUser" /></td>
				</tr>
				<tr>
					<td colspan="3"><input type="submit" name="submit"
						class="btn btn-primary" value="Submit" /> <input type="button"
						id="CancelManagerBtn" class="btn btn-info" value="Cancel" /></td>

				</tr>
			</tbody>
		</table>
	</form>
	<div id="submitResult"></div>
</div>
