<script type="text/javascript">
	var mTime = null;
	function updateTime() {
		mTime = Date.now().toString();
	}
	$(document).ready(function() {
		getFileSystemListData();

	});
	function destroyDataTable(id) {
		var table = $('#' + id).DataTable();
		console.log("tablee+" + table + "$('#'+id)::" + id);
		if (table != null) {
			table.destroy();
		}
	}
	function getFileSystemListData() {
		updateTime();
		console.log("loggedUserID" + loggedUserID);
		destroyDataTable('fileSystemData');
		$
				.ajax({
					type : "GET",
					contentType : "application/json; charset=utf-8",
					url : "/MonitoringRestServices/rest/fileSystemList"
							+ "?mtime=" + mTime,
					dataType : "json",
					headers : getHeadersData(),
					success : function(responseData) {
						$("#fileSystemData tbody").html("");
						if (responseData.length > 0) {
							console.log("File System List Success");
							$
									.each(
											responseData,
											function(i, item) {
												$("#fileSystemData tbody")
														.append(
																'<tr><td ><a href="#" onclick="updateFileSystem(this);" class="updateFSDetails" id="fsName" name="fsName">'
																		+ item.fsName
																		+ '</a></td>'
																		+ '<td id="fsHost">'
																		+ item.fsHost
																		+ '</td>'
																		+ '<td id="fsMount">'
																		+ item.fsMount
																		+ '</td>'
																		+ '<td id="fsPath">'
																		+ item.fsPath
																		+ '</td>'
																		+ '<td id="fsId" style="display:none;">'
																		+ item.id
																		+ '</td></tr>');
											});
							$.fn.dataTableExt.sErrMode = 'throw';
							$('#fileSystemData').dataTable({
								"searching" : true,
								"destroy" : true,
								"language" : {
									search : "_INPUT_",
									searchPlaceholder : "Search..."
								},
								"pagingType" : "simple",
								"bLengthChange" : false,
								"bSort" : true
							});
						} else {
							$("#fsListResults")
									.html(
											'<p class="failureMessage">No FileSystems Added....Add Here</p>');
							$("#fsListResults").removeClass(
									"alert alert-success");
							$("#fsListResults").addClass("alert alert-danger");
						}
						$('input, search').placeholder();
					},
					failure : function(errMsg) {
						$("#fsListResults")
								.html(
										'<p class="failureMessage">File System List failed</p>');
						$("#fsListResults").removeClass("alert alert-success");
						$("#fsListResults").addClass("alert alert-danger");
					}
				});
	}

	$("#add-fs").bind('click', function() {
		$("#rightpanel").load("pages/addFileSystem.html");
	});

	function updateFileSystem(th) {
		var fsDataEdit = {};
		fsDataEdit.id = $.trim($(th).closest("tr").find("#fsId").text());
		fsDataEdit.fsName = $.trim($(th).closest("tr").find("#fsName").text());
		fsDataEdit.fsHost = $.trim($(th).closest("tr").find("#fsHost").text());
		fsDataEdit.fsMount = $
				.trim($(th).closest("tr").find("#fsMount").text());
		fsDataEdit.fsPath = $.trim($(th).closest("tr").find("#fsPath").text());

		$("#rightpanel").load("pages/updateFileSystem.html", function() {
			loadPanel(fsDataEdit);
		});
		console.log("fsDataEdit:" + JSON.stringify(fsDataEdit));
		var insertFSData;
	};
</script>

<h2>Current File Systems</h2>
<div class="fsTableView">
	<table id="fileSystemData" class="file-system table" border="1">
		<thead>
			<tr>
				<td>FileSystem Name<span><input type="button"
						id="add-fs" class="add-icon" value="Add New File System" /></span></td>
				<td>Host Name</td>
				<td>FileSystem Mount</td>
				<td>FileSystem Path</td>
				<td style="display: none;">Id</td>
			</tr>
		</thead>
		<tbody>
		</tbody>
	</table>
</div>
<div>
	<div id="fsListResults"></div>
</div>
