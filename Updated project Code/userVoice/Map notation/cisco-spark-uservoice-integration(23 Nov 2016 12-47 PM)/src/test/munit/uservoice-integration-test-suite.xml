<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:json="http://www.mulesoft.org/schema/mule/json" xmlns:mock="http://www.mulesoft.org/schema/mule/mock"
	xmlns:dw="http://www.mulesoft.org/schema/mule/ee/dw"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" xmlns:core="http://www.mulesoft.org/schema/mule/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/mock http://www.mulesoft.org/schema/mule/mock/current/mule-mock.xsd
http://www.mulesoft.org/schema/mule/ee/dw http://www.mulesoft.org/schema/mule/ee/dw/current/dw.xsd
http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd">
    <munit:config name="munit" doc:name="MUnit configuration"/>
    <spring:beans>
        <spring:import resource="classpath:uservoice-integration.xml"/>
        <spring:import resource="classpath:uservoice-api-calls.xml"/>
        <spring:import resource="classpath:global.xml"/>
        <spring:import resource="classpath:core-services-invocations.xml"/>
    </spring:beans>
    <munit:test name="integration-test-suite-postAuthDetailsFlowTest" description="Test" ignore="true">
        <mock:when messageProcessor=".*:.*" doc:name="Mock">
            <mock:with-attributes>
                <mock:with-attribute name="doc:name" whereValue="#['HTTP']"/>
            </mock:with-attributes>
            <mock:then-return payload="#[]"/>
        </mock:when>
        <set-payload value="#[{&quot;grantType&quot;: &quot;authorization_code&quot;,&quot;clientId&quot;: &quot;8FS9UXeMT2pj7t6JSg&quot;,&quot;clientSecret&quot;: &quot;raShXP96VvHtz3nqBktFHutNJz4tduG9&quot;,&quot;code&quot;:&quot;Q7MV4uvPUNbWGu2EPC&quot;}]" doc:name="Set Payload"/>
        <flow-ref name="postAuthDetailsFlow" doc:name="Flow-ref to postAuthDetailsFlow"/>
        <munit:assert-not-null doc:name="Assert Not Null Payload"/>
    </munit:test>
    <munit:test name="integration-test-suite-postFormatMessage_ticket_admin_replyFlowTest" description="Test" >
        <mock:when messageProcessor=".*:.*" doc:name="Mock">
            <mock:with-attributes>
                <mock:with-attribute name="doc:name" whereValue="#['HTTP']"/>
            </mock:with-attributes>
            <mock:then-return payload="#[]"/>
        </mock:when>
        <dw:transform-message doc:name="Transform Message">
            <dw:set-payload><![CDATA[%dw 1.0
%output application/json
---
{
	"hookResponse": {
		"event": "new_ticket_admin_reply",
		"signature": "50ce61d69c0e29f87bf0e69f2a2636cbe37b256548ce9c6f7995a502a1b8cd10",
		"data": {
			"ticket": {
				"id": 157482940,
				"ticket_number": 6,
				"subject": "New Ticket",
				"state": "closed",
				"url": "https://esi1.uservoice.com/admin/tickets/6",
				"contact": {
					"id": 255708055,
					"name": "ranjith",
					"email": "ranjith.eidiko@gmail.com",
					"title": null,
					"url": "http://esi1.uservoice.com/users/255708055-ranjith",
					"avatar_url": "https://secure.gravatar.com/avatar/f7701204495aa243c1b1da65e1dfbe87?size=70\\u0026default=https://assets1.uvcdn.com/pkg/admin/icons/user_70-c68d06098b40646a91b7656094632c19.png\",\"karma_score\":0,\"traits\":\"\\n\",\"created_at\":\"2016/09/30 09:35:09 +0000\",\"updated_at\":\"2016/09/30 09:55:16 +0000\"}},\"message\":{\"id\":258622528,\"channel\":\"admin\",\"body\":\"dggergwergerger\",\"plaintext_body\":\"dggergwergerger\",\"is_admin_response\":true,\"sender\":{\"id\":255119086,\"name\":\"ranjith reddy\",\"email\":\"ranjithreddy.vadiyala@eidiko.com\",\"title\":null,\"url\":\"http://esi1.uservoice.com/users/255119086-ranjith-reddy\",\"avatar_url\":\"https://secure.gravatar.com/avatar/d26793675667a4cd3d11410bcf62e971?size=70\\u0026default=https://assets0.uvcdn.com/pkg/admin/icons/user_70-c68d06098b40646a91b7656094632c19.png",
					"karma_score": 0,
					"traits": "\n",
					"created_at": "2016/09/29 09:04:21 +0000",
					"updated_at": "2016/09/30 10:12:52 +0000"
				},
				"attachments": [],
				"ccs": [],
				"bccs": [],
				"created_at": "2016/09/30 11:06:55 +0000",
				"updated_at": "2016/09/30 11:06:55 +0000"
			}
		}
	},
	"userEvents": "{\"room_name\":\"Chennakesavulu\",\"displayName\":\"Ttest\",\"webhookUrl\":\"https://cisco-spark-integration-management-new-dev.cloudhub.io/api/hooks/b873aa00-86fb-11e6-aba9-06b2f9e298ab\"}",
	"instanceDetails": {
		"instanceId": 5727,
		"integrationId": "24",
		"userId": "Y2lzY29zcGFyazovL3VzL1BFT1BMRS8wYmQ5MGZjNS0wODZhLTRhZmUtOTI0YS03NzUyOWZiM2U1NTc",
		"updatedDate": "2016-09-30T10:56:03",
		"messageFormat": "UserVoice Bot :Hello...User",
		"createdDate": "2016-09-30T10:56:03",
		"status": "ACTIVE",
		"channelId": "Y2lzY29zcGFyazovL3VzL1JPT00vOWMwYTBlZGQtMjgyOC0zZTY4LWIyYmEtZjA2ODUwMmMwZTI1",
		"configJson": "{\"room_name\":\"Chennakesavulu\",\"displayName\":\"Ttest\",\"webhookUrl\":\"https://cisco-spark-integration-management-new-dev.cloudhub.io/api/hooks/b873aa00-86fb-11e6-aba9-06b2f9e298ab\"}",
		"instanceUuid": "b873aa00-86fb-11e6-aba9-06b2f9e298ab"
	}
}]]></dw:set-payload>
        </dw:transform-message>
        <flow-ref name="postFormatMessageFlow" doc:name="postFormatMessageFlow"/>
        <munit:assert-not-null doc:name="Assert Not Null Payload"/>
    </munit:test>
    <munit:test name="integration-test-suite-postFormatMessage_ticket_createFlowTest" description="Test" ignore="true">
        <mock:when messageProcessor=".*:.*" doc:name="Mock">
            <mock:with-attributes>
                <mock:with-attribute name="doc:name" whereValue="#['HTTP']"/>
            </mock:with-attributes>
            <mock:then-return payload="#[]"/>
        </mock:when>
        <dw:transform-message doc:name="Transform Message new ticket">
            <dw:set-payload><![CDATA[%dw 1.0
%output application/java
---
{
  "hookResponse": {
    "event": "new_ticket",
    "signature": "ff8543f3c6ca5d033d7b200cb117a3cc71544f518508ae43a04773bc87b7047d",
    "data": "{\"ticket\":{\"id\":158760253,\"ticket_number\":23,\"subject\":\"New Ticket\",\"state\":\"open\",\"url\":\"https://esi1.uservoice.com/admin/tickets/23\",\"from_email_address\":\"tickets@esi1.uservoice.com\",\"custom_fields\":[],\"messages\":[],\"notes\":[{\"id\":27774100,\"body\":\"hello\\u003cbr\\u003eevery one\",\"creator\":{\"id\":255119086,\"name\":\"ranjith reddy\",\"email\":\"ranjithreddy.vadiyala@eidiko.com\",\"title\":null,\"url\":\"http://esi1.uservoice.com/users/255119086-ranjith-reddy\",\"avatar_url\":\"https://secure.gravatar.com/avatar/d26793675667a4cd3d11410bcf62e971?size=70\\u0026default=https://assets0.uvcdn.com/pkg/admin/icons/user_70-c68d06098b40646a91b7656094632c19.png\",\"karma_score\":0,\"traits\":\"\\n\",\"created_at\":\"2016/09/29 09:04:21 +0000\",\"updated_at\":\"2016/10/05 07:01:51 +0000\"},\"attachments\":[],\"created_at\":\"2016/10/05 10:44:27 +0000\",\"updated_at\":\"2016/10/05 10:44:27 +0000\"}],\"created_by\":{\"id\":255119086,\"name\":\"ranjith reddy\",\"email\":\"ranjithreddy.vadiyala@eidiko.com\",\"title\":null,\"url\":\"http://esi1.uservoice.com/users/255119086-ranjith-reddy\",\"avatar_url\":\"https://secure.gravatar.com/avatar/d26793675667a4cd3d11410bcf62e971?size=70\\u0026default=https://assets1.uvcdn.com/pkg/admin/icons/user_70-c68d06098b40646a91b7656094632c19.png\",\"karma_score\":0,\"traits\":\"\\n\",\"created_at\":\"2016/09/29 09:04:21 +0000\",\"updated_at\":\"2016/10/05 07:01:51 +0000\"},\"updated_by\":{\"id\":255119086,\"name\":\"ranjith reddy\",\"email\":\"ranjithreddy.vadiyala@eidiko.com\",\"title\":null,\"url\":\"http://esi1.uservoice.com/users/255119086-ranjith-reddy\",\"avatar_url\":\"https://secure.gravatar.com/avatar/d26793675667a4cd3d11410bcf62e971?size=70\\u0026default=https://assets1.uvcdn.com/pkg/admin/icons/user_70-c68d06098b40646a91b7656094632c19.png\",\"karma_score\":0,\"traits\":\"\\n\",\"created_at\":\"2016/09/29 09:04:21 +0000\",\"updated_at\":\"2016/10/05 07:01:51 +0000\"},\"contact\":{\"id\":255706504,\"name\":\"abc\",\"email\":\"abc@abc.com\",\"title\":null,\"url\":\"http://esi1.uservoice.com/users/255706504-abc\",\"avatar_url\":\"https://secure.gravatar.com/avatar/4adcca49b3b1e5a08ac202f5d5a9e688?size=70\\u0026default=https://assets0.uvcdn.com/pkg/admin/icons/user_70-c68d06098b40646a91b7656094632c19.png\",\"karma_score\":0,\"traits\":\"\\n\",\"created_at\":\"2016/09/30 09:30:42 +0000\",\"updated_at\":\"2016/09/30 09:30:56 +0000\"},\"last_message_at\":\"2016/10/05 10:44:27 +0000\",\"created_at\":\"2016/10/05 10:44:27 +0000\",\"updated_at\":\"2016/10/05 10:44:27 +0000\"}}"
  },
  "userEvents": "{\"displayName\":\"Uservoice\",\"webhookUrl\":\"https://cisco-spark-integration-management-new-dev.cloudhub.io/api/hooks/22624ef0-8ac4-11e6-8d9a-0a6730018905\"}",
  "instanceDetails": {
    "instanceId": 5964,
    "integrationId": "24",
    "userId": "Y2lzY29zcGFyazovL3VzL1BFT1BMRS8yYTA0YzVkMy0yNGJjLTQ1ZWItYmQzYS05ZDU1OGRmMmZhMjI",
    "updatedDate": "2016-10-05T10:24:30",
    "messageFormat": "UserVoice Bot :Hello...User",
    "createdDate": "2016-10-05T06:32:16",
    "status": "ACTIVE",
    "channelId": "Y2lzY29zcGFyazovL3VzL1JPT00vNWQxYTIzMTAtMzJjYy0xMWU2LTk2YjYtMDU0N2M2YTM1ZTNi",
    "configJson": "{\"displayName\":\"Uservoice\",\"webhookUrl\":\"https://cisco-spark-integration-management-new-dev.cloudhub.io/api/hooks/22624ef0-8ac4-11e6-8d9a-0a6730018905\"}",
    "instanceUuid": "22624ef0-8ac4-11e6-8d9a-0a6730018905"
  }
}
]]></dw:set-payload>
        </dw:transform-message>
        <flow-ref name="postFormatMessageFlow" doc:name="postFormatMessageFlow"/>
        <munit:assert-not-null doc:name="Assert Not Null Payload"/>
    </munit:test>
    <munit:test name="integration-test-suite-postFormatMessage_ticketupdateFlowTest" description="Test" ignore="true">
        <mock:when messageProcessor=".*:.*" doc:name="Mock">
            <mock:with-attributes>
                <mock:with-attribute name="doc:name" whereValue="#['HTTP']"/>
            </mock:with-attributes>
            <mock:then-return payload="#[]"/>
        </mock:when>
        <dw:transform-message doc:name="Transform Message ticket update">
            <dw:set-payload><![CDATA[%dw 1.0
%output application/json
---
{
  
  "hookResponse": {
    "event": "ticket_status_update",
    "data": "{\"ticket\":{\"id\":158760253,\"ticket_number\":23,\"subject\":\"New Ticket\",\"state\":\"closed\",\"url\":\"https://esi1.uservoice.com/admin/tickets/23\",\"from_email_address\":\"tickets@esi1.uservoice.com\",\"custom_fields\":[],\"messages\":[],\"notes\":[{\"id\":27774100,\"body\":\"hello\\u003cbr\\u003eevery one\",\"creator\":{\"id\":255119086,\"name\":\"ranjith reddy\",\"email\":\"ranjithreddy.vadiyala@eidiko.com\",\"title\":null,\"url\":\"http://esi1.uservoice.com/users/255119086-ranjith-reddy\",\"avatar_url\":\"https://secure.gravatar.com/avatar/d26793675667a4cd3d11410bcf62e971?size=70\\u0026default=https://assets1.uvcdn.com/pkg/admin/icons/user_70-c68d06098b40646a91b7656094632c19.png\",\"karma_score\":0,\"traits\":\"\\n\",\"created_at\":\"2016/09/29 09:04:21 +0000\",\"updated_at\":\"2016/10/05 07:01:51 +0000\"},\"attachments\":[],\"created_at\":\"2016/10/05 10:44:27 +0000\",\"updated_at\":\"2016/10/05 10:44:27 +0000\"}],\"created_by\":{\"id\":255119086,\"name\":\"ranjith reddy\",\"email\":\"ranjithreddy.vadiyala@eidiko.com\",\"title\":null,\"url\":\"http://esi1.uservoice.com/users/255119086-ranjith-reddy\",\"avatar_url\":\"https://secure.gravatar.com/avatar/d26793675667a4cd3d11410bcf62e971?size=70\\u0026default=https://assets0.uvcdn.com/pkg/admin/icons/user_70-c68d06098b40646a91b7656094632c19.png\",\"karma_score\":0,\"traits\":\"\\n\",\"created_at\":\"2016/09/29 09:04:21 +0000\",\"updated_at\":\"2016/10/05 07:01:51 +0000\"},\"updated_by\":{\"id\":255119086,\"name\":\"ranjith reddy\",\"email\":\"ranjithreddy.vadiyala@eidiko.com\",\"title\":null,\"url\":\"http://esi1.uservoice.com/users/255119086-ranjith-reddy\",\"avatar_url\":\"https://secure.gravatar.com/avatar/d26793675667a4cd3d11410bcf62e971?size=70\\u0026default=https://assets0.uvcdn.com/pkg/admin/icons/user_70-c68d06098b40646a91b7656094632c19.png\",\"karma_score\":0,\"traits\":\"\\n\",\"created_at\":\"2016/09/29 09:04:21 +0000\",\"updated_at\":\"2016/10/05 07:01:51 +0000\"},\"contact\":{\"id\":255706504,\"name\":\"abc\",\"email\":\"abc@abc.com\",\"title\":null,\"url\":\"http://esi1.uservoice.com/users/255706504-abc\",\"avatar_url\":\"https://secure.gravatar.com/avatar/4adcca49b3b1e5a08ac202f5d5a9e688?size=70\\u0026default=https://assets0.uvcdn.com/pkg/admin/icons/user_70-c68d06098b40646a91b7656094632c19.png\",\"karma_score\":0,\"traits\":\"\\n\",\"created_at\":\"2016/09/30 09:30:42 +0000\",\"updated_at\":\"2016/09/30 09:30:56 +0000\"},\"last_message_at\":\"2016/10/05 10:44:27 +0000\",\"created_at\":\"2016/10/05 10:44:27 +0000\",\"updated_at\":\"2016/10/05 10:45:06 +0000\"}}",
    "signature": "3becfe7dd58dc42d347b6284f918b679332a8d4ce880f75616ba3aa63526a414"
  },
  "userEvents": "{\"displayName\":\"Uservoice\",\"webhookUrl\":\"https://cisco-spark-integration-management-new-dev.cloudhub.io/api/hooks/22624ef0-8ac4-11e6-8d9a-0a6730018905\"}",
  "instanceDetails": {
    "instanceId": 5964,
    "integrationId": "24",
    "userId": "Y2lzY29zcGFyazovL3VzL1BFT1BMRS8yYTA0YzVkMy0yNGJjLTQ1ZWItYmQzYS05ZDU1OGRmMmZhMjI",
    "updatedDate": "2016-10-05T10:24:30",
    "messageFormat": "UserVoice Bot :Hello...User",
    "createdDate": "2016-10-05T06:32:16",
    "status": "ACTIVE",
    "channelId": "Y2lzY29zcGFyazovL3VzL1JPT00vNWQxYTIzMTAtMzJjYy0xMWU2LTk2YjYtMDU0N2M2YTM1ZTNi",
    "configJson": "{\"displayName\":\"Uservoice\",\"webhookUrl\":\"https://cisco-spark-integration-management-new-dev.cloudhub.io/api/hooks/22624ef0-8ac4-11e6-8d9a-0a6730018905\"}",
    "instanceUuid": "22624ef0-8ac4-11e6-8d9a-0a6730018905"
  }
}]]></dw:set-payload>
        </dw:transform-message>
        <flow-ref name="postFormatMessageFlow" doc:name="postFormatMessageFlow"/>
        <munit:assert-not-null doc:name="Assert Not Null Payload"/>
    </munit:test>
    <munit:test name="integration-test-suite-postFormatMessage_new_kudoFlowTest" description="Test" ignore="true">
        <mock:when messageProcessor=".*:.*" doc:name="Mock">
            <mock:with-attributes>
                <mock:with-attribute name="doc:name" whereValue="#['HTTP']"/>
            </mock:with-attributes>
            <mock:then-return payload="#[]"/>
        </mock:when>
        <dw:transform-message doc:name="Transform Message for kudo">
            <dw:set-payload><![CDATA[%dw 1.0
%output application/json
---
{
  "hookResponse": {
    "data": "{\"kudo\":{\"id\":2510404,\"ticket\":{\"id\":157747678,\"ticket_number\":12,\"subject\":\"Ticket to test\",\"state\":\"closed\",\"url\":\"https://esi1.uservoice.com/admin/tickets/12\",\"contact\":{\"id\":255708055,\"name\":\"ranjith\",\"email\":\"ranjith.eidiko@gmail.com\",\"title\":null,\"url\":\"http://esi1.uservoice.com/users/255708055-ranjith\",\"avatar_url\":\"https://secure.gravatar.com/avatar/f7701204495aa243c1b1da65e1dfbe87?size=70\\u0026default=https://assets0.uvcdn.com/pkg/admin/icons/user_70-c68d06098b40646a91b7656094632c19.png\",\"karma_score\":0,\"traits\":\"\\n\",\"created_at\":\"2016/09/30 09:35:09 +0000\",\"updated_at\":\"2016/09/30 11:06:55 +0000\"}},\"message\":{\"id\":260042446,\"channel\":\"admin\",\"body\":\"hello\\u003cbr\\u003e\\nthis is test\\u003cbr\\u003e\\ncomment\",\"plaintext_body\":\"hello\\n\\nthis is test\\n\\ncomment\",\"is_admin_response\":true,\"sender\":{\"id\":255119086,\"name\":\"ranjith reddy\",\"email\":\"ranjithreddy.vadiyala@eidiko.com\",\"title\":null,\"url\":\"http://esi1.uservoice.com/users/255119086-ranjith-reddy\",\"avatar_url\":\"https://secure.gravatar.com/avatar/d26793675667a4cd3d11410bcf62e971?size=70\\u0026default=https://assets0.uvcdn.com/pkg/admin/icons/user_70-c68d06098b40646a91b7656094632c19.png\",\"karma_score\":0,\"traits\":\"\\n\",\"created_at\":\"2016/09/29 09:04:21 +0000\",\"updated_at\":\"2016/10/05 07:01:51 +0000\"},\"attachments\":[],\"ccs\":[],\"bccs\":[],\"created_at\":\"2016/10/04 14:59:00 +0000\",\"updated_at\":\"2016/10/04 14:59:00 +0000\"},\"sender\":{\"id\":255708055,\"name\":\"ranjith\",\"email\":\"ranjith.eidiko@gmail.com\",\"title\":null,\"url\":\"http://esi1.uservoice.com/users/255708055-ranjith\",\"avatar_url\":\"https://secure.gravatar.com/avatar/f7701204495aa243c1b1da65e1dfbe87?size=70\\u0026default=https://assets0.uvcdn.com/pkg/admin/icons/user_70-c68d06098b40646a91b7656094632c19.png\",\"karma_score\":0,\"traits\":\"\\n\",\"created_at\":\"2016/09/30 09:35:09 +0000\",\"updated_at\":\"2016/09/30 11:06:55 +0000\"},\"created_at\":\"2016/10/05 10:39:40 +0000\",\"updated_at\":\"2016/10/05 10:39:40 +0000\"}}",
    "signature": "cb9662792ecebcb9fc03b45e4a2ed19796b72dfaa467af6dd51e708bd00fabd3",
    "event": "new_kudo"
  },
  "userEvents": "{\"displayName\":\"Uservoice\",\"webhookUrl\":\"https://cisco-spark-integration-management-new-dev.cloudhub.io/api/hooks/22624ef0-8ac4-11e6-8d9a-0a6730018905\"}",
  "instanceDetails": {
    "instanceId": 5964,
    "integrationId": "24",
    "userId": "Y2lzY29zcGFyazovL3VzL1BFT1BMRS8yYTA0YzVkMy0yNGJjLTQ1ZWItYmQzYS05ZDU1OGRmMmZhMjI",
    "updatedDate": "2016-10-05T10:24:30",
    "messageFormat": "UserVoice Bot :Hello...User",
    "createdDate": "2016-10-05T06:32:16",
    "status": "ACTIVE",
    "channelId": "Y2lzY29zcGFyazovL3VzL1JPT00vNWQxYTIzMTAtMzJjYy0xMWU2LTk2YjYtMDU0N2M2YTM1ZTNi",
    "configJson": "{\"displayName\":\"Uservoice\",\"webhookUrl\":\"https://cisco-spark-integration-management-new-dev.cloudhub.io/api/hooks/22624ef0-8ac4-11e6-8d9a-0a6730018905\"}",
    "instanceUuid": "22624ef0-8ac4-11e6-8d9a-0a6730018905"
  }
}]]></dw:set-payload>
        </dw:transform-message>
        <flow-ref name="postFormatMessageFlow" doc:name="postFormatMessageFlow"/>
        <munit:assert-not-null doc:name="Assert Not Null Payload"/>
    </munit:test>
    <munit:test name="integration-test-suite-postFormatMessage_suggestion_creationFlowTest" description="Test" ignore="true">
        <mock:when messageProcessor=".*:.*" doc:name="Mock">
            <mock:with-attributes>
                <mock:with-attribute name="doc:name" whereValue="#['HTTP']"/>
            </mock:with-attributes>
            <mock:then-return payload="#[]"/>
        </mock:when>
        <dw:transform-message doc:name="Transform Message for suggestion creation">
            <dw:set-payload><![CDATA[%dw 1.0
%output application/json
---
{
  "hookResponse": {
    "signature": "0f588cd9ae7c3451ebfe418cccfecc17fb37ec38526e091c16e1acee4edbfd67",
    "data": "{\"suggestion\":{\"url\":\"http://esi1.uservoice.com/forums/552886-operating-system/suggestions/16502755-suggestion-to-use-h-w-load-balancer\",\"path\":\"/forums/552886-operating-system/suggestions/16502755-suggestion-to-use-h-w-load-balancer\",\"id\":16502755,\"state\":\"approved\",\"title\":\"Suggestion to use H/W load balancer\",\"text\":\"Suggestion to use H/W load balancer\",\"formatted_text\":\"\\u003cdiv class=\\\"typeset\\\"\\u003e\\u003cp\\u003eSuggestion to use H/W load balancer\\u003c/p\\u003e\\u003c/div\\u003e\",\"referrer\":null,\"vote_count\":0,\"subscriber_count\":0,\"comments_count\":0,\"supporters_count\":0,\"merged_into_suggestion_id\":null,\"topic\":{\"id\":552886,\"prompt\":\"I suggest you ...\",\"example\":\"OS level issues\",\"votes_allowed\":10,\"suggestions_count\":17,\"open_suggestions_count\":8,\"closed\":false,\"anonymous_access\":false,\"unlimited_votes\":true,\"classic_voting\":\"false\",\"closed_at\":null,\"created_at\":\"2016/09/29 09:04:21 +0000\",\"updated_at\":\"2016/10/01 10:58:03 +0000\",\"forum\":{\"id\":\"552886\",\"name\":\"Operating System\"}},\"category\":null,\"closed_at\":null,\"status\":null,\"creator\":{\"id\":255119086,\"name\":\"ranjith reddy\",\"email\":\"ranjithreddy.vadiyala@eidiko.com\",\"title\":null,\"url\":\"http://esi1.uservoice.com/users/255119086-ranjith-reddy\",\"avatar_url\":\"https://secure.gravatar.com/avatar/d26793675667a4cd3d11410bcf62e971?size=70\\u0026default=https://assets1.uvcdn.com/pkg/admin/icons/user_70-c68d06098b40646a91b7656094632c19.png\",\"karma_score\":0,\"traits\":\"\\n\",\"created_at\":\"2016/09/29 09:04:21 +0000\",\"updated_at\":\"2016/10/05 07:01:51 +0000\"},\"response\":null,\"attachments\":[],\"created_at\":\"2016/10/05 10:37:04 +0000\",\"updated_at\":\"2016/10/05 10:37:04 +0000\"}}",
    "event": "new_suggestion"
  },
  "userEvents": "{\"displayName\":\"Uservoice\",\"webhookUrl\":\"https://cisco-spark-integration-management-new-dev.cloudhub.io/api/hooks/22624ef0-8ac4-11e6-8d9a-0a6730018905\"}",
  "instanceDetails": {
    "instanceId": 5964,
    "integrationId": "24",
    "userId": "Y2lzY29zcGFyazovL3VzL1BFT1BMRS8yYTA0YzVkMy0yNGJjLTQ1ZWItYmQzYS05ZDU1OGRmMmZhMjI",
    "updatedDate": "2016-10-05T10:24:30",
    "messageFormat": "UserVoice Bot :Hello...User",
    "createdDate": "2016-10-05T06:32:16",
    "status": "ACTIVE",
    "channelId": "Y2lzY29zcGFyazovL3VzL1JPT00vNWQxYTIzMTAtMzJjYy0xMWU2LTk2YjYtMDU0N2M2YTM1ZTNi",
    "configJson": "{\"displayName\":\"Uservoice\",\"webhookUrl\":\"https://cisco-spark-integration-management-new-dev.cloudhub.io/api/hooks/22624ef0-8ac4-11e6-8d9a-0a6730018905\"}",
    "instanceUuid": "22624ef0-8ac4-11e6-8d9a-0a6730018905"
  }
}]]></dw:set-payload>
        </dw:transform-message>
        <flow-ref name="postFormatMessageFlow" doc:name="postFormatMessageFlow"/>
        <munit:assert-not-null doc:name="Assert Not Null Payload"/>
    </munit:test>
    <munit:test name="integration-test-suite-postFormatMessage_newArticle_FlowTest" description="Test" ignore="true">
        <mock:when messageProcessor=".*:.*" doc:name="Mock">
            <mock:with-attributes>
                <mock:with-attribute name="doc:name" whereValue="#['HTTP']"/>
            </mock:with-attributes>
            <mock:then-return payload="#[]"/>
        </mock:when>
        <dw:transform-message doc:name="Transform Message for new article">
            <dw:set-payload><![CDATA[%dw 1.0
%output application/json
---
{
  "hookResponse": {
    "signature": "0ca0f4ea5536d3e0d7dfeb1245f5949881e3d0696f428d20331421707d5775a3",
    "data": "{\"article\":{\"url\":\"http://eidiko1.uservoice.com/knowledgebase/articles/1080211-update-issue\",\"path\":\"/knowledgebase/articles/1080211-update-issue\",\"id\":1080211,\"title\":\"Update Issue\",\"text\":\"Issue is open\",\"formatted_text\":\"Issue is open\\u003cdiv\\u003e\\u003c/div\\u003e\",\"uses\":0,\"instant_answers\":0,\"published\":true,\"updated_by\":{\"id\":257805442,\"name\":\"Rajasekhar vendidandi\",\"email\":\"rajasekhar.vendidandi@eidiko.com\",\"title\":null,\"url\":\"http://eidiko1.uservoice.com/users/257805442-rajasekhar-vendidandi\",\"avatar_url\":\"https://secure.gravatar.com/avatar/7e7892e79d701b23e38cf0a3daa3f006?size=70\\u0026default=https://assets1.uvcdn.com/pkg/admin/icons/user_70-c68d06098b40646a91b7656094632c19.png\",\"karma_score\":0,\"traits\":\"\\n\",\"created_at\":\"2016/10/04 08:19:04 +0000\",\"updated_at\":\"2016/10/05 07:14:32 +0000\"},\"topic\":null,\"created_at\":\"2016/10/05 06:36:15 +0000\",\"updated_at\":\"2016/10/05 07:20:36 +0000\",\"question\":\"Update Issue\",\"answer_html\":\"Issue is open\\u003cdiv\\u003e\\u003c/div\\u003e\"}}",
    "event": "new_article"
  },
  "userEvents": "{\"displayName\":\"Uservoice\",\"webhookUrl\":\"https://cisco-spark-integration-management-new-dev.cloudhub.io/api/hooks/22624ef0-8ac4-11e6-8d9a-0a6730018905\"}",
  "instanceDetails": {
    "instanceId": 5964,
    "integrationId": "24",
    "userId": "Y2lzY29zcGFyazovL3VzL1BFT1BMRS8yYTA0YzVkMy0yNGJjLTQ1ZWItYmQzYS05ZDU1OGRmMmZhMjI",
    "updatedDate": "2016-10-05T06:32:16",
    "messageFormat": "UserVoice Bot :Hello...User",
    "createdDate": "2016-10-05T06:32:16",
    "status": "ACTIVE",
    "channelId": "Y2lzY29zcGFyazovL3VzL1JPT00vZTMwNDFjNTAtNjgzZC0xMWU2LTgxYmYtYjEzZjcwZDM3N2Ri",
    "configJson": "{\"displayName\":\"Uservoice\",\"webhookUrl\":\"https://cisco-spark-integration-management-new-dev.cloudhub.io/api/hooks/22624ef0-8ac4-11e6-8d9a-0a6730018905\"}",
    "instanceUuid": "22624ef0-8ac4-11e6-8d9a-0a6730018905"
  }
}]]></dw:set-payload>
        </dw:transform-message>
        <flow-ref name="postFormatMessageFlow" doc:name="postFormatMessageFlow"/>
        <munit:assert-not-null doc:name="Assert Not Null Payload"/>
    </munit:test>
    <munit:test name="integration-test-suite-postIntegrationSettingsFlowTest" description="Test" ignore="true">
        <mock:when messageProcessor=".*:.*" doc:name="Mock">
            <mock:with-attributes>
                <mock:with-attribute name="doc:name" whereValue="#['HTTP']"/>
            </mock:with-attributes>
            <mock:then-return payload="#[]"/>
        </mock:when>
        <set-payload value="#[{&quot;token&quot; : &quot;sascdscdskwqhdiuqwhda7y8dyas&quot;}]" doc:name="Set Payload"/>
        <flow-ref name="postIntegrationSettingsFlow" doc:name="Flow-ref to postIntegrationSettingsFlow"/>
        <munit:assert-not-null doc:name="Assert Not Null Payload"/>
    </munit:test>
    <munit:test name="integration-test-suite-setupIntegrationFlowTest" description="Test" ignore="true">
        <mock:when messageProcessor=".*:.*" doc:name="Mock">
            <mock:with-attributes>
                <mock:with-attribute name="doc:name" whereValue="#['HTTP']"/>
            </mock:with-attributes>
            <mock:then-return payload="#[]"/>
        </mock:when>
        <set-payload value="#[{&quot;grantType&quot;: &quot;authorization_code&quot;,&quot;clientId&quot;: &quot;8FS9UXeMT2pj7t6JSg&quot;,&quot;clientSecret&quot;: &quot;raShXP96VvHtz3nqBktFHutNJz4tduG9&quot;,&quot;code&quot;:&quot;Q7MV4uvPUNbWGu2EPC&quot;}]" doc:name="Set Payload"/>
        <flow-ref name="setupIntegrationFlow" doc:name="setupIntegrationFlow"/>
        <munit:assert-not-null doc:name="Assert Not Null Payload"/>
    </munit:test>
    <munit:test name="integration-test-suite-updateIntegrationFlowTest" description="Test" ignore="true">
        <mock:when messageProcessor=".*:.*" doc:name="Mock">
            <mock:with-attributes>
                <mock:with-attribute name="doc:name" whereValue="#['HTTP']"/>
            </mock:with-attributes>
            <mock:then-return payload="#[]"/>
        </mock:when>
        <set-payload value="#[{&quot;grantType&quot;: &quot;authorization_code&quot;,&quot;clientId&quot;: &quot;8FS9UXeMT2pj7t6JSg&quot;,&quot;clientSecret&quot;: &quot;raShXP96VvHtz3nqBktFHutNJz4tduG9&quot;,&quot;code&quot;:&quot;Q7MV4uvPUNbWGu2EPC&quot;}]" doc:name="Set Payload"/>
        <flow-ref name="updateIntegrationFlow" doc:name="updateIntegrationFlow"/>
        <munit:assert-not-null doc:name="Assert Not Null Payload"/>
    </munit:test>
    <munit:test name="integration-test-suite-tearDownIntegrationFlowTest" description="Test" ignore="true">
        <mock:when messageProcessor=".*:.*" doc:name="Mock">
            <mock:with-attributes>
                <mock:with-attribute name="doc:name" whereValue="#['HTTP']"/>
            </mock:with-attributes>
            <mock:then-return payload="#[]"/>
        </mock:when>
        <set-payload value="#[{&quot;grantType&quot;: &quot;authorization_code&quot;,&quot;clientId&quot;: &quot;8FS9UXeMT2pj7t6JSg&quot;,&quot;clientSecret&quot;: &quot;raShXP96VvHtz3nqBktFHutNJz4tduG9&quot;,&quot;code&quot;:&quot;Q7MV4uvPUNbWGu2EPC&quot;}]" doc:name="Set Payload"/>
        <flow-ref name="tearDownIntegrationFlow" doc:name="tearDownIntegrationFlow"/>
        <munit:assert-not-null doc:name="Assert Not Null Payload"/>
    </munit:test>
    
    <munit:test name="integration-test-suite-healthCheckFlowTest" description="Test" ignore="true">
        <mock:when messageProcessor=".*:.*" doc:name="Mock">
            <mock:with-attributes>
                <mock:with-attribute name="doc:name" whereValue="#['HTTP']"/>
            </mock:with-attributes>
            <mock:then-return payload="#[]"/>
        </mock:when>
        <set-payload value="#[{&quot;integrationId&quot;: &quot;Y2lzY29zcGFyazovL3VzL0FQUExJQ0FUSU9OLzAyM2RmYmMwLTQ5MjUtNDc1NC05ZDJiLTdkMjE0NmY4ZDllMg&quot;,&quot;userId&quot;: &quot;Y2lzY29zcGFyazovL3VzL1BFT1BMRS9mMGU2OWMzYi1lMzU4LTQ3ZTUtODQyYy02MWMxMmRlNTVhY2Q&quot;}]" doc:name="Set Payload"/>
        <flow-ref name="healthCheckFlow" doc:name="Flow-ref to healthCheckFlow"/>
        <munit:assert-not-null doc:name="Assert Not Null Payload"/>
    </munit:test>
</mule>
